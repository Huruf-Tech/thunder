#!/bin/sh
set -e

MSG_FILE="$1"
MSG="$(cat "$MSG_FILE")"

# Very small Conventional Commits pattern (customize to your needs)
# Examples: feat: ..., fix(api): ..., chore!: ...
echo "$MSG" | grep -Eq '^(feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\([a-z0-9_-]+\))?(!)?: .+' || {
  echo "[commit-msg] Invalid commit message."
  echo "Expected: type(scope)?: subject  (e.g., feat(api): add auth)"
  exit 1
}
